import{useEffect}from"react";import supabase from"../supabase/supabase-client";import avatarCache from"./avatarCache.min.js";export default function useDownloadImage(a,t){useEffect((()=>{if(!a)return void t(null);if(a.startsWith("http")||a.startsWith("blob:"))return void t(a);const e=avatarCache.get(a);e?t(e):(async a=>{try{const{data:e,error:r}=await supabase.storage.from("avatars").download(a);if(r)throw r;const s=URL.createObjectURL(e);avatarCache.set(a,s),t(s)}catch(a){}})(a)}),[a,t])}